<!DOCTYPE html>
<html lang="en"
      xmlns:th="https://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity6">
<head th:replace="~{fragments/template :: head}"></head>
<body>
    <form th:fragment="availableMedicalSlotsFormTable"
          id="availableMedicalSlotsFormTable"
          th:object="${availableMedicalSlotsForm}"
          th:action="@{/medicalSlot-management/slots/create}"
          method="post"
          class="mt-4">
        <div class="overflow-x-auto">
        <table class="min-w-full bg-white">
            <thead class="font-light text-sm text-slate-600 text-left tracking-wide">
            <tr class="bg-slate-200">
                <th class="text-sm rounded-l-lg py-2 px-4">Mês Ref.</th>
                <th class="text-sm pl-4">Vagas</th>
                <th class="text-sm pl-4">Especialidade</th>
                <th class="text-sm pl-4">Marcação</th>
                <th class="text-sm pl-4">Procedimento</th>
                <th class="text-sm pl-4">UBS</th>
                <th class="text-sm rounded-r-lg py-2 px-4">Ações</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="row, itemStat : ${availableMedicalSlotsForm.availableMedicalSlots}"
                class="overflow-hidden border-slate-200 text-slate-600 w-full hover:bg-slate-50 active:bg-slate-200">
                <td class="border-b text-sm py-2 px-4" th:text="${#temporals.monthNameShort(row.referenceMonth)}"></td>
                <td class="border-b text-sm pl-4 text-center" th:text="${row.totalSlots}"></td>
                <td class="border-b text-sm pl-4" th:text="${row.medicalProcedure.specialty.title}"></td>
                <td class="border-b text-sm pl-4" th:text="${row.medicalProcedure.procedureType.description}"></td>
                <td class="border-b text-sm pl-4" th:text="${row.medicalProcedure.description}"></td>
                <td class="border-b text-sm pl-4" th:text="${row.basicHealthUnit.name}"></td>
                <td style="display:none;">
                    <input type="hidden" th:name="|availableMedicalSlots[${itemStat.index}].referenceMonth|" th:value="${row.referenceMonth}">
                </td>
                <td style="display:none;">
                    <input type="hidden" th:name="|availableMedicalSlots[${itemStat.index}].totalSlots|" th:value="${row.totalSlots}">
                </td>
                <td style="display:none;">
                    <input type="hidden" th:name="|availableMedicalSlots[${itemStat.index}].medicalProcedure.id|" th:value="${row.medicalProcedure.id}">
                </td>
                <td style="display:none;">
                    <input type="hidden" th:name="|availableMedicalSlots[${itemStat.index}].basicHealthUnit.id|" th:value="${row.basicHealthUnit.id}">
                </td>
                <td class="border-b text-sm py-2 px-4">
                    <div class="relative group">
                        <a th:attrappend="hx-get=@{/medicalSlot-management/slots/{index}/remove(index = ${itemStat.index})}"
                           hx-target="#availableMedicalSlotsFormTable"
                           hx-swap="outerHTML"
                           href=""
                           class="inline-flex p-2 rounded-lg hover:bg-slate-200 cursor-pointer transition duration-300">
                            <span class="material-symbols-outlined hover:text-red-500">delete</span>
                        </a>
                        <div class="absolute right-full top-1/2 transform -translate-y-1/2 -translate-x-1 hidden group-hover:block bg-slate-800 text-white text-sm rounded px-2 py-1">
                            Remover
                        </div>
                    </div>
                </td>
            </tr>
            </tbody>
        </table>
        </div>
    </form>
</body>
</html>